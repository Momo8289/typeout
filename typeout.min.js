let caretSheet=document.createElement("link");caretSheet.rel="stylesheet",caretSheet.type="text/css",caretSheet.href="./typeout-caretblink.css",document.getElementsByTagName("body")[0].prepend(caretSheet);const getTextMetrics=(a,b)=>{const c=getTextMetrics.canvas||(getTextMetrics.canvas=document.createElement("canvas")),d=c.getContext("2d");d.font=b;const e=d.measureText(a);return e},typeOut=(a,b,c={},d=[])=>{c={...{loop:!1,charDelay:100,cycleDelay:1e3,gonext:!1,caret:!1,caretBlinkInterval:500,caretOn:!0},...c},b.innerText="";let e=a.split(""),f=setInterval(()=>{0<e.length?c.caret?(b.innerHTML=b.innerHTML.slice(0,-1),b.innerHTML+=e.shift()+"|"):b.innerHTML+=e.shift():(clearInterval(f),c.caret&&(c.caretBlinkTimer=setInterval(()=>{c.caretOn?(b.innerHTML=b.innerHTML.slice(0,-1),c.caretOn=!1):(b.innerHTML+="|",c.caretOn=!0)},c.caretBlinkInterval)),c.gonext&&cycleWord(d,b,c))},c.charDelay)},cycleWord=(a,b,c={})=>{c={...{loop:!0,charDelay:100,cycleDelay:1e3,count:-1,gonext:!0,caret:!1,caretBlinkInterval:500},...c},setTimeout(()=>{c.count++,!c.loop&&c.count>=a.length-1&&(c.gonext=!1),c.caret&&clearInterval(c.caretBlinkTimer),typeOut(a[c.count%a.length],b,c,a)},c.cycleDelay)};